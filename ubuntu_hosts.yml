---
   - hosts: ubuntu
     become: yes
     #     ask_become_pass: yes
     tasks:
       - name: Ensure Aptitude is present
         apt: name=aptitude state=present

       - name: Blacklisted app
         apt: name={{item}} state=absent
         with_items:
           - thunderbird

       - name: "apt check updates"
         apt: 
         #      force_apt_get : yes
           update_cache: yes
           autoclean: yes
           autoremove: yes
           upgrade: full
           # upgrade: dist


       - name: "Install utilities"
         apt: name={{item}}  state=latest
         with_items:
           - screen
           - terminator
           - bfgminer
           - iotop
           - at
           - vim
           - sysstat
             #           - btrfs-progs
           - bash-completion
           - python-optcomplete
           - exfat-utils
           - exfat-fuse
           - samba
           - libpam-mount
           - gnome-system-tools
           - cifs-utils
           - smbclient
           - screen
           - pv
           - nfs-common
           - dconf-editor
           - gparted
           - tree
           - fatresize
           - fbset
       - name: Enable sysstat
         replace:
           path: '/etc/default/sysstat'
           regexp: 'ENABLED="false"'       
           replace: 'ENABLED="true"'
           backup: yes
       - name: Make enable sysstat
         service: 
           name: 'sysstat.service' 
           state: 'restarted'
       - name: "Network utils"
         apt: name={{item}} state=latest
         with_items:
                 #    - net-tools
           - iftop
           - wireshark
           - nmap
           - network-manager
           - samba-common
           - mailutils
           - mutt
           - nfs-kernel-server
         become: yes 
       - name: "Network resourses utils"
         apt: name={{item}} state=latest
         with_items:
                 #  - freeipa-client
                 #  - sl
           - xterm
       - name: "Security protection utils"
         apt: name={{item}} state=latest
         with_items:
           - clamav
           - firewalld
           - rsnapshot
           - xymon-client
           - aide
           - cryptsetup
           - apparmor-utils
             #       - name:  Apparmor complain only
             #         shell: 'aa-complain /usr/sbin/{{item}}'
             #         with_items:
             #           - mysqld
       - name: "LAMP utils"
         apt: name={{item}} state=latest
         with_items:
                 #           - mariadb-client
           - mariadb-server
           - rhc
       - name: update alternatives
         #         alternatives: name={{item}} path={{item}}
         shell: 'update-alternatives --set editor   /usr/bin/vim.basic'
         with_items:
           - { 'editor', '/usr/bin/vim' }
             #           - { name: 'editor',path: '/usr/bin/vim' }
         when: ansible_os_family == 'Debian'
   - hosts: kalibur-mce 
     roles: 
       - mce_samba_shares
   - hosts: all
     roles: 
       - gluster_clients
         #  - mce_samba_shares
       - kodi
   - hosts: kal-xt3, kalibur-mce
     roles:
       - devops
   - hosts: kalibur-mce
     roles:
       - mythtv
   - hosts: kal-bunker
     roles:
       - samba_std
         #   - include: kal-labs/ubuntu-ansible/roles/samba_std/vars/"{{ hostvars[inventory_hostname].ansible_hostname }}".yml
         #- include_vars: "roles/samba_std/vars/{{ ansible_hostname }}".yml 
